<!DOCTYPE html>
<head><title>LatLong App by: Rupinder Matharoo</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
    //Author: Rupinder Singh Matharoo 
    //Dated: January 20,2014
    // This small Application uses jQuery, JSON, and Google GeoCode API to get the Address Coordinates. The query if valid returns number of results with link and coordinates. App also allows you to reverse geocode the longitude and latitude values to give you the address suggestions returned by the Google geocode API.
    $(document).ready(function(){
        //hide the menu when app starts..
        $("#geocoding").hide();
        $("#reverse").hide();
        //Geocoding the addresses
        $("#getgeo").click(function(){
            $("#geo").find("tbody").remove();
            var add= $("#add").val();
            if(add==""){
                $('#geo').append('<tr><td>No string entered!!<br></td></tr>');
            }
            else{
             $.getJSON('http://maps.google.com/maps/api/geocode/json?sensor=false&address='+add, function(jd) {
                if(jd.status=="OK"){
                    for(var i=0; i<jd.results.length; i++){
                    var lat= jd.results[i].geometry.location.lat;
                    var lng= jd.results[i].geometry.location.lng;
                    var link = "http://maps.google.com/?q="+lat+","+lng;
                    $('#geo').append('<tr><td>Address: <a target="_blank" href='+link+'>' + jd.results[i].formatted_address +'</a>'+ 
                                     '<br>Latitude: ' + lat + 
                                     '<br>Longitude: ' + lng +
                                     '<br></td></tr>');
                     }
                 }
                 if(jd.status=="ZERO_RESULTS"){
                        $('#geo').append('<tr><td>'+add+' not found! <br></td></tr>');
                         }
              });
            }
        });
        //Reverse Geocoding
        $("#getadd").click(function(){
            $("#geo").find("tbody").remove();
            var latlng= $("#lat").val()+","+$("#lng").val();
            //console.log(latlng);
            if($("#lat").val()=="" || $("#lng").val()==""){
                $('#geo').append('<tr><td>Please enter both Latitude and Longitude values<br></td></tr>');
            }
            if($("#lat").val()!="" && $("#lng").val()!=""){
             $.getJSON('http://maps.googleapis.com/maps/api/geocode/json?sensor=false&latlng='+latlng, function(jd) {
                if(jd.status=="OK"){
                    console.log(jd.results.length);
                    for(var i=0; i<jd.results.length; i++){
                    var addr= new String;
                    addr= jd.results[i].formatted_address;
                    //encoding the address value to concatenate into the link...
                    var links = "http://maps.google.com/?q="+encodeURIComponent(addr);
                    //console.log(links);
                    $('#geo').append('<tr><td>Address: <a target="_blank" href='+links+'>' + jd.results[i].formatted_address +'</a>'+
                                     '<br></td></tr>');
                     }
                 }
                 if(jd.status=="ZERO_RESULTS"){
                        $('#geo').append('<tr><td>Address not found! <br></td></tr>');
                         }
              });
            }
        });
        $("#clear1").click(function(){
            $("#geo").find("tbody").remove();
        });
        
        $("#clear2").click(function(){
            $("#geo").find("tbody").remove();
        });
        
        $("#radgeo").click(function(){
            if($("#radgeo").is(":checked")){
                $("#geocoding").show(500).fadeIn;
                $("#reverse").hide(500).fadeIn;
            }
        });
        
        $("#radrev").click(function(){
            if($("#radrev").is(":checked")){
                $("#geocoding").hide(500).fadeIn;
                $("#reverse").show(500).fadeIn;
            }
        });
        
    });//End of main document ready function
    </script>
</head>
<body>
    <div id="headings" style="text-align:center; font-family:courier new;"><h1>LatLong App</h1>
        <h5>Using jQuery, HTML5 & Google GeoCode API</h5>
    </div>
    <div style="text-align:center; font-family:courier new; font-weight:bold; font-size:14px">
        <input type="radio" value="getgeo" name="type" id="radgeo" >
        <label for="radgeo">Get Geocode</label>
        <input type="radio" value="reverse" name="type" id="radrev" >
        <label for="radrev">Reverse Geocode</label>
    </div>
    <div id="geocoding" style="text-align:center;">
        <input type="text" id="add" placeholder="Enter Country or City or Address " size="35">
        <button id="getgeo">Get GeoCodes</button>
        <button id="clear1">Clear</button>
    </div>
    <div id="reverse" style="text-align:center;">
        <input type="text" id="lat" placeholder="Latitude">
        <input type="text" id="lng" placeholder="Longitude">
        <button id="getadd">Get Address</button>
        <button id="clear2">Clear</button>
    </div>
    
    <table border="1" id="geo" style="width: 50%; margin: auto;"></table>
    
    <div id="headings" style="text-align:center; font-family:courier new;">
        <h6>&copy; 2014 App by Rupinder Singh Matharoo</h6>
    </div>
</body>
</html>